# <a name="top"></a>Which historical backend should I use?

The ThinkingCity Platform provides several backends where historical datasets related to real-time context information can be created and maintained. Among these backends we can find:

* [MongoDB](https://www.mongodb.com), a highly scalable NoSQL database used for large-scale historical storage.
* [MicroStrategy](https://www.microstrategy.com), the platform’s Business Intelligence component.
* [CKAN](http://ckan.org/), our Open Data platform.

Given this variety of backends, the key question is: which one best suits my use case? This usually depends on the following variables:

* **Amount of data**. If you can estimate the volume of data in the short, medium, and long term, this will be one of the most relevant decisions.
* **Privacy considerations**. Maybe your data can be made public as Open Data; or not.
* **Desired analysis**. The main goal of storing data is to analyze it to obtain valuable information.
* **Visualization tools**. Closely related to the above, graphical tools are useful when handling large volumes of information.

A fifth variable could be whether the backend allows **static data loading**, meaning uploading other datasets independent from the real-time contextual data.

Let’s look at each option from these perspectives.

## MongoDB

MongoDB is currently the preferred solution for large-scale historical persistence, replacing the old systems based on Hadoop/HDFS. As a document-oriented NoSQL database, it allows managing massive volumes of data with high efficiency and horizontal scalability.

This backend is ideal if you handle large amounts of historical data. Moreover, MongoDB is flexible in terms of data schema, which makes it easier to adapt to changes in input formats without redesigning structures.

Regarding analysis, although MongoDB does not provide visual analytics tools by itself, it allows executing complex aggregate queries through its aggregation framework, or easily integrating with external tools such as [Grafana](https://grafana.com/), [Metabase](https://www.metabase.com/), among others.

In terms of privacy, MongoDB manages access through roles and authentication at the collection and database level, allowing fine-grained control over permissions.

MongoDB also supports **static data loading**, so you can integrate your own datasets (e.g., historical records, catalogs, etc.) and analyze them along with the data generated by the ThinkingCity Platform.

[Top](#top)

## MicroStrategy

This is the ThinkingCity Platform’s Business Intelligence system. It is ideal if your goal is to generate business-oriented visualizations and analyses, since MicroStrategy offers a wide range of functionalities:

* General data visualization.
* New data discovery.
* Geospatial visualizations.
* Advanced analytical functions.
* Business reports.
* Dashboards.

All data must be stored in the Analytical Database (MySQL), which manages a private database for each FIWARE service (tenant).

[Top](#top)

## CKAN

If you want to make your data public, CKAN is the ideal backend. It is one of the most recognized Open Data platforms worldwide. According to the [Open Knowledge Foundation](https://okfn.org/opendata/), making your data *open* means that anyone can use, reuse, and redistribute it freely.

With CKAN, data can be stored in the FileStore (a simple file manager) or in the DataStore (based on [PostgreSQL](http://www.postgresql.org)).

Moreover, CKAN offers visualization tools through integrated viewers:

* **Text view** and **image view**, which allow exploring files directly in the browser.
* **Recline View**, which allows visualizing data as a table, chart, or map if it contains geographic information.

CKAN does not include analysis tools, but it does allow **uploading static datasets**, public or private, and provides access control at the organization or dataset level.

[Top](#top)

## Summary

| Backend        | Capacity | Privacy                               | Analysis                                                              | Visualization                          | Static Load     |
|----------------|----------|---------------------------------------|-----------------------------------------------------------------------|----------------------------------------|-----------------|
| MongoDB        | High     | Per MongoDB roles and users           | Complex aggregations<br>BI integration                                | Integration with Grafana/Metabase      | Yes             |
| MicroStrategy  | Medium   | Per database (1)                      | Many business algorithms                                              | Business dashboards                    | No              |
| CKAN           | Medium   | Per dataset (2)                       | -                                                                     | CKAN views: text, image, table, map    | Yes             |

(1) One database is managed per FIWARE service.  
(2) A dataset belongs to a CKAN organization, which corresponds to the FIWARE service. The dataset name concatenates the service and its path.

[Top](#top)
